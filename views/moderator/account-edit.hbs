<link rel="stylesheet" href="/css/account.css" />
<link rel="stylesheet" href="/css/forms.css" />
<link rel="stylesheet" href="/css/sidebar.css" />

<script>
  //commented until user story comment

</script>

<div class="modal" onclick="closeModal()">
  <div class="modal__content">
    <h3>Are you sure you want to delete this account?</h3>
    <div class="flex">
      <button class="button button--outline" onclick="closeModal()">
        Cancel
      </button>
      <form
        action="/moderator/delete/user/{{user._id}}?_method=DELETE"
        method="POST"
      >
        <button id="deleteBtn" class="button button--danger">Delete</button>
      </form>
    </div>
  </div>
</div>

<section class="padded">
  <div class="container">
    <h1 class="text-primary">{{user.firstName}} {{user.lastName}}</h1>
    <br />
    <h3>Edit Account</h3>
    <hr />
    <form
      action="/edit/u/{{user._id}}/done?_method=PUT"
      method="POST"
      id="editAccountForm"
      data-userId="{{user._id}}"
    >
      <div class="flex form__items">
        <label for="email">Email Address</label>
        <input
          type="email"
          name="email"
          id="email"
          value="{{user.email}}"
          class="form__input"
          disabled
        />
        <div class="message error-msg" id="firstName"></div>
        <label for="firstName">First Name</label>
        <input
          type="text"
          name="firstName"
          id="firstName"
          value="{{user.firstName}}"
          class="form__input"
        />
        <div class="message error-msg" id="lastName"></div>
        <label for="lastName">Last Name</label>
        <input
          type="text"
          name="lastName"
          id="lastName"
          value="{{user.lastName}}"
          class="form__input"
        />
        <div class="loader"></div>
        <div class="flex submit__container">
          <button class="button" id="submitBtn">Save Changes</button>
          <div class="loader"></div>
        </div>
      </div>
    </form>
    <div class="delete-account">
      <h3 class="text-red">Delete Account</h3>
      <hr />
      <p>Once the account is deleted, there is no going back. Please be certain.</p>
      <button class="button button--danger" onclick="openModal()">Delete Account</button>
    </div>

    <div class="suspend-account">
      <h3>Suspend Account</h3>
      <hr />
      <p>Suspending a User makes it so that they cannot log into their account.</p>

      <form
        action="/moderator/suspend/u/{{user._id}}?_method=PUT"
        method="POST"
      >
        {{#if user.suspended}}
          <button class="button">Unsuspend Account</button>
        {{else}}
          <button class="button button--danger">Suspend Account</button>
        {{/if}}
      </form>
    </div>

  </div>
</section>

<script src="/js/account.js"></script>
<script src="/js/forms.js"></script>